<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=yes" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <link rel="stylesheet" type="text/css" href="css/artwork.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <!--   <link rel="stylesheet" type="text/css" href="css/index.css"> -->
    <script type="text/javascript" src="js/getMediaElement.js"></script>
    <script type="text/javascript" src="js/socket.io.js"></script>
    <!--   Cordova.JS wird beim Bauen automatisch ergÃ¤nzt, deshalb passt die Pfadangabe so -->
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

    <script type="text/javascript">
      // if (setting_vibro == 1) {
      //   navigator.vibrate(1000);
      // }

      var url;
      var id;
      var api = 'http://85.235.67.239:5000/apiv1/fligthid?id=';

      var requestID = new XMLHttpRequest();
      requestID.open('GET','http://85.235.67.239:5000/apiv1/fligthstate');
      requestID.onload = function () {
        if (this.status == 200) {
          var data = JSON.parse(requestID.responseText);
          id = data.fligth_id;
          url = api + id;
        }
      };
      requestID.send();

      setTimeout(requestDetail, 200);

      function requestDetail() {
        var requestDetails = new XMLHttpRequest();
        requestDetails.open('GET', url) ;
        requestDetails.onreadystatechange = function(){
          if (this.readyState == 4 && this.status ==200) {
            var data = JSON.parse(requestDetails.responseText);
            renderHTML(data);
          }
        };
        requestDetails.send();
      }


      function renderHTML(data){
        document.getElementById('flightnum').innerHTML = data.Flight.Number;
        document.getElementById('dest').innerHTML = data.Destination.Name;
        document.getElementById('gate').innerHTML = data.Gate;
        document.getElementById('terminal').innerHTML = data.Terminal;
        document.getElementById('departure').innerHTML = data.Plan.slice(11,16);
      }

    </script>
</head>

<body>
  <div id="content">
      <div>
          <a href="index.html" id="unique">
              <img src="logo.png" alt="logo" id="center">
          </a>
          <div class="grid-layout">
            <div class="grid-item-header">Flugdaten</div>
            <div class="grid-item">Departure:</div>
            <div class="grid-item" id="departure"></div>
            <div class="grid-item">Terminal:</div>
            <div class="grid-item" id="terminal"></div>
            <div class="grid-item">Gate:</div>
            <div class="grid-item" id="gate"></div>
            <div class="grid-item">Flightnumber:</div>
            <div class="grid-item" id="flightnum"></div>
            <div class="grid-item">Destination:</div>
            <div class="grid-item" id="dest"></div>
          </div>
      </div>
      <a href="index.html">Back</a>

</body>

</html>
